<template>
<div id="app">
<div class="container h-100">
	<div class="row justify-content-center align-items-center">

<svg preserveAspectRatio="xMidYMid meet" viewBox="0 0 640 640" width="80%" height="80%">
	<defs>
		<path d="M620.94 312.45C620.94 482.26 483.08 620.12 313.27 620.12C143.46 620.12 5.6 482.26 5.6 312.45C5.6 142.64 143.46 4.77 313.27 4.77C483.08 4.77 620.94 142.64 620.94 312.45Z" id="b5O6jNK65I"/>
		<path d="M616.59 311.99C616.59 479.4 480.68 615.31 313.27 615.31C145.86 615.31 9.95 479.4 9.95 311.99C9.95 144.58 145.86 8.67 313.27 8.67C480.68 8.67 616.59 144.58 616.59 311.99Z" id="b1ATkTw4D"/>
		<path d="M334.03 173.98C371.33 174.73 444.35 215.1 455.75 296.89C456.59 302.49 460 305.11 466.01 304.76L593.99 304.76C601.39 305.05 604.19 299.45 602.38 287.97C585.08 155.64 502.83 46.58 334.35 26.28C327.48 25.25 324.14 28 324.34 34.53C324.34 104.25 324.34 147.82 324.34 165.25C324.34 165.25 324.42 166.55 324.42 166.55C325.03 171.43 328.23 173.91 334.03 173.98Z" id="ag8uPx9hz"/>
		<radialGradient id="gradientb2IS9jSjMK" gradientUnits="userSpaceOnUse" cx="312.56" cy="314.65" dx="512.56" dy="103.82" r="290.6">
			<stop style="stop-color: #919191;stop-opacity: 1" offset="0%"/>
			<stop style="stop-color: #8b2a2a;stop-opacity: 1" offset="100%"/>
		</radialGradient>
		<path d="M333.86 458.82C371.16 458.07 444.19 417.7 455.59 335.91C456.42 330.31 459.84 327.69 465.84 328.04L593.82 328.04C601.22 327.75 604.02 333.35 602.21 344.83C584.91 477.16 502.66 586.22 334.18 606.52C327.31 607.55 323.97 604.8 324.17 598.27C324.17 528.55 324.17 484.98 324.17 467.55C324.17 467.55 324.25 466.25 324.25 466.25C324.86 461.37 328.06 458.89 333.86 458.82Z" id="c1xbECf2XY"/>
		<radialGradient id="gradientb1YdLxilm9" gradientUnits="userSpaceOnUse" cx="317.76" cy="316.34" dx="533.09" dy="502.18" r="284.44">
			<stop style="stop-color: #868686;stop-opacity: 1" offset="0%"/>
			<stop style="stop-color: #2b458b;stop-opacity: 1" offset="100%"/>
		</radialGradient>
		<path d="M292.67 173.98C255.37 174.73 182.35 215.1 170.95 296.89C170.12 302.49 166.7 305.11 160.7 304.76L32.72 304.76C25.31 305.05 22.51 299.45 24.32 287.97C41.62 155.64 123.88 46.58 292.35 26.28C299.23 25.25 302.57 28 302.37 34.53C302.37 104.25 302.37 147.82 302.37 165.25C302.37 165.25 302.29 166.55 302.29 166.55C301.68 171.43 298.47 173.91 292.67 173.98Z" id="e1lqkzlwZ"/>
		<radialGradient id="gradienta28n5R2ZL5" gradientUnits="userSpaceOnUse" cx="317.02" cy="328.01" dx="109.94" dy="105.52" r="303.95">
			<stop style="stop-color: #868686;stop-opacity: 1" offset="0%"/>
			<stop style="stop-color: #3d8629;stop-opacity: 1" offset="100%"/>
		</radialGradient>
		<path d="M292.67 458.82C255.37 458.07 182.35 417.7 170.95 335.91C170.12 330.31 166.7 327.69 160.7 328.04L32.72 328.04C25.31 327.75 22.51 333.35 24.32 344.83C41.62 477.16 123.88 586.22 292.35 606.52C299.23 607.55 302.57 604.8 302.37 598.27C302.37 528.55 302.37 484.98 302.37 467.55C302.37 467.55 302.29 466.25 302.29 466.25C301.68 461.37 298.47 458.89 292.67 458.82Z" id="d7NJnwPZYk"/>
		<radialGradient id="gradientbr3nZsTZZ" gradientUnits="userSpaceOnUse" cx="313.27" cy="316.34" dx="123.59" dy="534.25" r="288.9">
			<stop style="stop-color: #838383;stop-opacity: 1" offset="0%"/>
			<stop style="stop-color: #988d23;stop-opacity: 1" offset="100%"/>
		</radialGradient>
		<path d="M395.36 366.4C395.36 374.43 388.84 380.95 380.81 380.95C372.78 380.95 366.26 374.43 366.26 366.4C366.26 358.37 372.78 351.85 380.81 351.85C388.84 351.85 395.36 358.37 395.36 366.4Z" id="b3j1HVZrQ7"/>
		<radialGradient id="gradienta1loxlWs7k" gradientUnits="userSpaceOnUse" cx="380.81" cy="367.08" dx="380.81" dy="389.54" r="22.46">
			<stop style="stop-color: #cff3c7;stop-opacity: 1" offset="0%"/>
			<stop style="stop-color: #00cc00;stop-opacity: 1" offset="100%"/>
		</radialGradient>
		<path d="M345.14 348.94C346.41 348.94 347.43 349.97 347.43 351.24C347.43 357.76 347.43 375.05 347.43 381.57C347.43 382.84 346.41 383.86 345.14 383.86C317.85 383.86 238.25 383.86 210.95 383.86C209.69 383.86 208.66 382.84 208.66 381.57C208.66 375.05 208.66 357.76 208.66 351.24C208.66 349.97 209.69 348.94 210.95 348.94C238.25 348.94 317.85 348.94 345.14 348.94Z" id="d42b1kmhzH"/>
		<text id="b5wfxce731" x="287.8" y="364.5" font-size="18" font-family="Orbitron" font-weight="normal" font-style="normal" letter-spacing="0" alignment-baseline="before-edge" transform="matrix(1 0 0 1 -9.749679199845474 -8.658966502552005)" style="line-height:100%" xml:space="preserve" dominant-baseline="text-before-edge">
			<tspan x="287.8" dy="0em" alignment-baseline="before-edge" dominant-baseline="text-before-edge" text-anchor="middle">{{round}}</tspan>
		</text>
		<text id="d2mmi925dM" x="431.95" y="258.28" font-size="99" font-family="Squada One" font-weight="700" font-style="normal" letter-spacing="0" alignment-baseline="before-edge" transform="matrix(1 0 0 1 -119.38737523245457 -26.005228928791112)" style="line-height:100%" xml:space="preserve" dominant-baseline="text-before-edge">
			<tspan x="431.95" dy="0em" alignment-baseline="before-edge" dominant-baseline="text-before-edge" text-anchor="middle">SIMON</tspan>
		</text>
		<text id="coWxng37v" x="375.85" y="398.36" font-size="18" font-family="Squada One" font-weight="100" font-style="normal" letter-spacing="0" alignment-baseline="before-edge" transform="matrix(1 0 0 1 4.962522632136341 -12.89838089346307)" style="line-height:100%" xml:space="preserve" dominant-baseline="text-before-edge">
			<tspan x="375.85" dy="0em" alignment-baseline="before-edge" dominant-baseline="text-before-edge" text-anchor="middle">START</tspan>
		</text>
		<text id="eTMzGoI67" x="376.68" y="398.36" font-size="18" font-family="Squada One" font-weight="100" font-style="normal" letter-spacing="0" alignment-baseline="before-edge" transform="matrix(1 0 0 1 -98.6284911329428 -12.89838089346307)" style="line-height:100%" xml:space="preserve" dominant-baseline="text-before-edge">
			<tspan x="376.68" dy="0em" alignment-baseline="before-edge" dominant-baseline="text-before-edge" text-anchor="middle">COUNT</tspan>
		</text>
		<path d="M334.03 173.98C371.33 174.73 444.35 215.1 455.75 296.89C456.59 302.49 460 305.11 466.01 304.76L593.99 304.76C601.39 305.05 604.19 299.45 602.38 287.97C585.08 155.64 502.83 46.58 334.35 26.28C327.48 25.25 324.14 28 324.34 34.53C324.34 104.25 324.34 147.82 324.34 165.25C324.34 165.25 324.42 166.55 324.42 166.55C325.03 171.43 328.23 173.91 334.03 173.98Z" id="b5iNIYtzah"/>
		<radialGradient id="gradienta3Rr1He0po" gradientUnits="userSpaceOnUse" cx="460.53" cy="165.43" dx="636.26" dy="0" r="241.34">
			<stop style="stop-color: #ffb6b6;stop-opacity: 1" offset="0%"/>
			<stop style="stop-color: #ff0000;stop-opacity: 1" offset="100%"/>
		</radialGradient>
		<path d="M334.03 458.28C371.33 457.54 444.35 417.17 455.75 335.37C456.59 329.78 460 327.16 466.01 327.51L593.99 327.51C601.39 327.22 604.19 332.81 602.38 344.29C585.08 476.63 502.83 585.68 334.35 605.99C327.48 607.02 324.14 604.27 324.34 597.74C324.34 528.02 324.34 484.44 324.34 467.01C324.34 467.01 324.42 465.71 324.42 465.71C325.03 460.83 328.23 458.36 334.03 458.28Z" id="bt264fbl7"/>
		<radialGradient id="gradiente1VZoj1Vat" gradientUnits="userSpaceOnUse" cx="463.62" cy="461.49" dx="640" dy="642.51" r="252.75">
			<stop style="stop-color: #c5e3ff;stop-opacity: 1" offset="0%"/>
			<stop style="stop-color: #0045ff;stop-opacity: 1" offset="100%"/>
		</radialGradient>
		<path d="M292.67 174C255.37 174.75 182.35 215.11 170.95 296.91C170.12 302.5 166.7 305.12 160.7 304.78L32.72 304.78C25.31 305.06 22.51 299.47 24.32 287.99C41.62 155.65 123.88 46.6 292.35 26.29C299.23 25.26 302.57 28.01 302.37 34.55C302.37 104.27 302.37 147.84 302.37 165.27C302.37 165.27 302.29 166.57 302.29 166.57C301.68 171.45 298.47 173.93 292.67 174Z" id="e54nxqSyM"/>
		<radialGradient id="gradienta8QEcvvT9" gradientUnits="userSpaceOnUse" cx="164.92" cy="171.95" dx="0" dy="0" r="238.25">
			<stop style="stop-color: #f2ffec;stop-opacity: 1" offset="0%"/>
			<stop style="stop-color: #1dc700;stop-opacity: 1" offset="100%"/>
		</radialGradient>
		<path d="M292.67 459.21C255.37 458.47 182.35 418.1 170.95 336.3C170.12 330.71 166.7 328.09 160.7 328.43L32.72 328.43C25.31 328.15 22.51 333.74 24.32 345.22C41.62 477.56 123.88 586.61 292.35 606.92C299.23 607.95 302.57 605.2 302.37 598.66C302.37 528.95 302.37 485.37 302.37 467.94C302.37 467.94 302.29 466.64 302.29 466.64C301.68 461.76 298.47 459.29 292.67 459.21Z" id="a1TXPSwdXt"/>
		<radialGradient id="gradientaJksW0yy7" gradientUnits="userSpaceOnUse" cx="168.41" cy="456.92" dx="2.1" dy="640" r="247.34">
			<stop style="stop-color: #fffbe3;stop-opacity: 1" offset="0%"/>
			<stop style="stop-color: #ffe700;stop-opacity: 1" offset="100%"/>
		</radialGradient>
	</defs>
	<g>
		<g>
			<g>
				<g>
					<filter id="shadow14760793" x="-82.4" y="-83.23" width="794.34" height="794.34" filterUnits="userSpaceOnUse" primitiveUnits="userSpaceOnUse">
						<feFlood/>
						<feComposite in2="SourceAlpha" operator="in"/>
						<feGaussianBlur stdDeviation="6.32"/>
						<feOffset dx="3" dy="3" result="afterOffset"/>
						<feFlood flood-color="#575757" flood-opacity="0.5"/>
						<feComposite in2="afterOffset" operator="in"/>
						<feMorphology operator="dilate" radius="0"/>
						<feComposite in2="SourceAlpha" operator="out"/>
					</filter>
					<path d="M620.94 312.45C620.94 482.26 483.08 620.12 313.27 620.12C143.46 620.12 5.6 482.26 5.6 312.45C5.6 142.64 143.46 4.77 313.27 4.77C483.08 4.77 620.94 142.64 620.94 312.45Z" id="j1elp0GUoD" fill="white" fill-opacity="1" filter="url(#shadow14760793)"/>
				</g>
				<use xlink:href="#b5O6jNK65I" opacity="1" fill="#5f5f5f" fill-opacity="1"/>
			</g>
			<g>
				<use xlink:href="#b1ATkTw4D" opacity="1" fill="#262626" fill-opacity="1"/>
			</g>
			<g>
				<use xlink:href="#ag8uPx9hz" opacity="1" fill="url(#gradientb2IS9jSjMK)"/>
			</g>
			<g>
				<use xlink:href="#c1xbECf2XY" opacity="1" fill="url(#gradientb1YdLxilm9)"/>
			</g>
			<g>
				<use xlink:href="#e1lqkzlwZ" opacity="1" fill="url(#gradienta28n5R2ZL5)"/>
			</g>
			<g>
				<use xlink:href="#d7NJnwPZYk" opacity="1" fill="url(#gradientbr3nZsTZZ)"/>
			</g>
			<g class="game-button" @click="startGame()">
				<g>
					<filter id="shadow10363558" x="330.26" y="315.85" width="103.1" height="102.1" filterUnits="userSpaceOnUse" primitiveUnits="userSpaceOnUse">
						<feFlood/>
						<feComposite in2="SourceAlpha" operator="in"/>
						<feGaussianBlur stdDeviation="3.74"/>
						<feOffset dx="2" dy="1" result="afterOffset"/>
						<feFlood flood-color="#000000" flood-opacity="0.5"/>
						<feComposite in2="afterOffset" operator="in"/>
						<feMorphology operator="dilate" radius="1"/>
						<feComposite in2="SourceAlpha" operator="out"/>
					</filter>
					<path d="M395.36 366.4C395.36 374.43 388.84 380.95 380.81 380.95C372.78 380.95 366.26 374.43 366.26 366.4C366.26 358.37 372.78 351.85 380.81 351.85C388.84 351.85 395.36 358.37 395.36 366.4Z" id="eZCCgCknS" fill="white" fill-opacity="1" filter="url(#shadow10363558)"/>
				</g>
				<use xlink:href="#b3j1HVZrQ7" opacity="1" fill="url(#gradienta1loxlWs7k)"/>
				<g>
					<filter id="shadow16499807" x="357.26" y="342.85" width="48.1" height="48.1" filterUnits="userSpaceOnUse" primitiveUnits="userSpaceOnUse">
						<feFlood/>
						<feComposite in2="SourceAlpha" operator="out"/>
						<feGaussianBlur stdDeviation="1"/>
						<feOffset dx="1" dy="1" result="afterOffset"/>
						<feFlood flood-color="#ffffff" flood-opacity="0.8"/>
						<feComposite in2="afterOffset" operator="in"/>
						<feMorphology operator="dilate" radius="1"/>
						<feComposite in2="SourceAlpha" operator="in"/>
					</filter>
					<path d="M395.36 366.4C395.36 374.43 388.84 380.95 380.81 380.95C372.78 380.95 366.26 374.43 366.26 366.4C366.26 358.37 372.78 351.85 380.81 351.85C388.84 351.85 395.36 358.37 395.36 366.4Z" id="ac0fHtqOj" fill="white" fill-opacity="1" filter="url(#shadow16499807)"/>
				</g>
			</g>
			<g>
				<g>
					<filter id="shadow15025209" x="199.66" y="339.94" width="156.77" height="52.92" filterUnits="userSpaceOnUse" primitiveUnits="userSpaceOnUse">
						<feFlood/>
						<feComposite in2="SourceAlpha" operator="in"/>
						<feGaussianBlur stdDeviation="1.41"/>
						<feOffset dx="0" dy="0" result="afterOffset"/>
						<feFlood flood-color="#777777" flood-opacity="0.5"/>
						<feComposite in2="afterOffset" operator="in"/>
						<feMorphology operator="dilate" radius="0"/>
						<feComposite in2="SourceAlpha" operator="out"/>
					</filter>
					<path d="M345.14 348.94C346.41 348.94 347.43 349.97 347.43 351.24C347.43 357.76 347.43 375.05 347.43 381.57C347.43 382.84 346.41 383.86 345.14 383.86C317.85 383.86 238.25 383.86 210.95 383.86C209.69 383.86 208.66 382.84 208.66 381.57C208.66 375.05 208.66 357.76 208.66 351.24C208.66 349.97 209.69 348.94 210.95 348.94C238.25 348.94 317.85 348.94 345.14 348.94Z" id="b19d9cCMyx" fill="white" fill-opacity="1" filter="url(#shadow15025209)"/>
				</g>
				<use xlink:href="#d42b1kmhzH" opacity="1" fill="#000000" fill-opacity="1"/>
			</g>
			<g id="d1lIQowAC">
				<use xlink:href="#b5wfxce731" opacity="1" fill="#ff5656" fill-opacity="1"/>
			</g>
			<g id="bcnhULBPI">
				<use xlink:href="#d2mmi925dM" opacity="1" fill="#eaeaea" fill-opacity="1"/>
			</g>
			<g id="b2p0EvMXAK">
				<use xlink:href="#coWxng37v" opacity="1" fill="#e9e9e9" fill-opacity="1"/>
			</g>
			<g id="j1BoW2jfKr">
				<use xlink:href="#eTMzGoI67" opacity="1" fill="#e9e9e9" fill-opacity="1"/>
			</g>
			<g class="game-button" @mousedown="press('red')" :opacity="pressed.red ? 1 : 0">
				<g>
					<filter id="shadow14656475" x="316.33" y="18.07" width="295.58" height="295.73" filterUnits="userSpaceOnUse" primitiveUnits="userSpaceOnUse">
						<feFlood/>
						<feComposite in2="SourceAlpha" operator="in"/>
						<feGaussianBlur stdDeviation="1"/>
						<feOffset dx="-1" dy="1" result="afterOffset"/>
						<feFlood flood-color="#ffffff" flood-opacity="1"/>
						<feComposite in2="afterOffset" operator="in"/>
						<feMorphology operator="dilate" radius="0"/>
						<feComposite in2="SourceAlpha" operator="out"/>
					</filter>
					<path d="M334.03 173.98C371.33 174.73 444.35 215.1 455.75 296.89C456.59 302.49 460 305.11 466.01 304.76L593.99 304.76C601.39 305.05 604.19 299.45 602.38 287.97C585.08 155.64 502.83 46.58 334.35 26.28C327.48 25.25 324.14 28 324.34 34.53C324.34 104.25 324.34 147.82 324.34 165.25C324.34 165.25 324.42 166.55 324.42 166.55C325.03 171.43 328.23 173.91 334.03 173.98Z" id="b4Ys2ymc" fill="white" fill-opacity="1" filter="url(#shadow14656475)"/>
				</g>
				<use xlink:href="#b5iNIYtzah" opacity="1" fill="url(#gradienta3Rr1He0po)"/>
			</g>
			<g class="game-button" @mousedown="press('blue')" :opacity="pressed.blue ? 1 : 0">
				<g>
					<filter id="shadow7258212" x="316.33" y="319.48" width="295.58" height="295.73" filterUnits="userSpaceOnUse" primitiveUnits="userSpaceOnUse">
						<feFlood/>
						<feComposite in2="SourceAlpha" operator="in"/>
						<feGaussianBlur stdDeviation="1"/>
						<feOffset dx="-1" dy="-1" result="afterOffset"/>
						<feFlood flood-color="#ffffff" flood-opacity="1"/>
						<feComposite in2="afterOffset" operator="in"/>
						<feMorphology operator="dilate" radius="0"/>
						<feComposite in2="SourceAlpha" operator="out"/>
					</filter>
					<path d="M334.03 458.28C371.33 457.54 444.35 417.17 455.75 335.37C456.59 329.78 460 327.16 466.01 327.51L593.99 327.51C601.39 327.22 604.19 332.81 602.38 344.29C585.08 476.63 502.83 585.68 334.35 605.99C327.48 607.02 324.14 604.27 324.34 597.74C324.34 528.02 324.34 484.44 324.34 467.01C324.34 467.01 324.42 465.71 324.42 465.71C325.03 460.83 328.23 458.36 334.03 458.28Z" id="b4jiq6uL4" fill="white" fill-opacity="1" filter="url(#shadow7258212)"/>
				</g>
				<use xlink:href="#bt264fbl7" opacity="1" fill="url(#gradiente1VZoj1Vat)"/>
			</g>
			<g class="game-button" @mousedown="press('green')" :opacity="pressed.green ? 1 : 0">
				<g>
					<filter id="shadow1445561" x="15.79" y="18.08" width="295.58" height="295.73" filterUnits="userSpaceOnUse" primitiveUnits="userSpaceOnUse">
						<feFlood/>
						<feComposite in2="SourceAlpha" operator="in"/>
						<feGaussianBlur stdDeviation="1"/>
						<feOffset dx="1" dy="1" result="afterOffset"/>
						<feFlood flood-color="#ffffff" flood-opacity="1"/>
						<feComposite in2="afterOffset" operator="in"/>
						<feMorphology operator="dilate" radius="0"/>
						<feComposite in2="SourceAlpha" operator="out"/>
					</filter>
					<path d="M292.67 174C255.37 174.75 182.35 215.11 170.95 296.91C170.12 302.5 166.7 305.12 160.7 304.78L32.72 304.78C25.31 305.06 22.51 299.47 24.32 287.99C41.62 155.65 123.88 46.6 292.35 26.29C299.23 25.26 302.57 28.01 302.37 34.55C302.37 104.27 302.37 147.84 302.37 165.27C302.37 165.27 302.29 166.57 302.29 166.57C301.68 171.45 298.47 173.93 292.67 174Z" id="bFTajvYbZ" fill="white" fill-opacity="1" filter="url(#shadow1445561)"/>
				</g>
				<use xlink:href="#e54nxqSyM" opacity="1" fill="url(#gradienta8QEcvvT9)"/>
			</g>
			<g class="game-button" @mousedown="press('yellow')" :opacity="pressed.yellow ? 1 : 0">
				<g>
					<filter id="shadow12954394" x="15.79" y="320.4" width="295.58" height="295.73" filterUnits="userSpaceOnUse" primitiveUnits="userSpaceOnUse">
						<feFlood/>
						<feComposite in2="SourceAlpha" operator="in"/>
						<feGaussianBlur stdDeviation="1"/>
						<feOffset dx="1" dy="-1" result="afterOffset"/>
						<feFlood flood-color="#ffffff" flood-opacity="1"/>
						<feComposite in2="afterOffset" operator="in"/>
						<feMorphology operator="dilate" radius="0"/>
						<feComposite in2="SourceAlpha" operator="out"/>
					</filter>
					<path d="M292.67 459.21C255.37 458.47 182.35 418.1 170.95 336.3C170.12 330.71 166.7 328.09 160.7 328.43L32.72 328.43C25.31 328.15 22.51 333.74 24.32 345.22C41.62 477.56 123.88 586.61 292.35 606.92C299.23 607.95 302.57 605.2 302.37 598.66C302.37 528.95 302.37 485.37 302.37 467.94C302.37 467.94 302.29 466.64 302.29 466.64C301.68 461.76 298.47 459.29 292.67 459.21Z" id="bkqQwaWXk" fill="white" fill-opacity="1" filter="url(#shadow12954394)"/>
				</g>
				<use xlink:href="#a1TXPSwdXt" opacity="1" fill="url(#gradientaJksW0yy7)"/>
			</g>
		</g>
	</g>
</svg>

  </div>
</div>
</div>
</template>

<script>
let soundsBasePath = "./assets/sounds/";
let sounds = {
  red: require(soundsBasePath + "red.mp3"),
  blue: require(soundsBasePath + "blue.mp3"),
  yellow: require(soundsBasePath + "yellow.mp3"),
  green: require(soundsBasePath + "green.mp3"),
  win: require(soundsBasePath + "applause.wav")
};

export default {
  computed: {},
  data() {
    return {
      round: 0,
      maxRounds: 20,
      player: [],
      simon: [],
      pressable: false,
      pressed: {
        red: false,
        blue: false,
        yellow: false,
        green: false
      },
      delayBetweenRounds: 500,
      delayBetweenFlashes: 200,
      flashDuration: 500
    };
  },
  computed: {
    playable() {
      return this.pressable;
    }
  },
  methods: {
    disablePlayer() {
      this.pressable = false;
    },
    enablePlayer() {
      this.pressable = true;
    },
    press(color) {
      if (!this.playable) {
        return;
      }

      this.disablePlayer();
      this.player.push(color);
      this.flashSingle(color).then(() => {
        this.checkLastPress();
      });
    },
    checkLastPress() {
      let idx = this.player.length - 1;
      if (this.player[idx] === this.simon[idx]) {
        if (this.player.length === this.simon.length) {
          this.winRound();
        } else {
          // let the player continue with his sequence
          this.enablePlayer();
        }
      } else {
        this.loseGame();
      }
    },
    winRound() {
      if (this.round === this.maxRounds) {
        this.winGame();
      } else {
        setTimeout(() => {
          this.startNextRound();
        }, this.delayBetweenRounds);
      }
    },
    winGame() {
      this.round = "YOU WON!";
      this.playSound(sounds.win);
    },
    loseGame() {
      this.round = "YOU LOST!";
    },
    startNextRound() {
      this.disablePlayer();
      this.player = [];
      this.round++;
      this.simon.push(this.getRandomColor());
      this.simonSay(this.simon).then(() => {
        this.enablePlayer();
      });
    },
    resetGame() {
      this.disablePlayer();
      this.round = 0;
      this.player = [];
      this.simon = [];
    },
    startGame() {
      this.resetGame();
      this.startNextRound();
    },
    getRandomColor() {
      let colors = ["red", "blue", "yellow", "green"];
      let rnd = Math.floor(Math.random() * colors.length);
      return colors[rnd];
    },
    simonSay(sequence) {
      return this.flashSequence(sequence, this.delayBetweenFlashes);
    },
    flashSequence(sequence, gapTime) {
      gapTime;
      return new Promise(resolve => {
        if (sequence && sequence.length > 0) {
          let color = sequence[0];
          this.flashSingle(color).then(() => {
            setTimeout(() => {
              this.simonSay(sequence.slice(1)).then(() => resolve());
            }, gapTime);
          });
        } else {
          resolve();
        }
      });
    },
    flashSingle(color) {
      return new Promise(resolve => {
        this.pressed[color] = true;
        this.playSound(sounds[color]);
        setTimeout(() => {
          this.pressed[color] = false;
          resolve();
        }, this.flashDuration);
      });
    },
    playSound(sound) {
      if (sound) {
        var audio = new Audio(sound);
        audio.play();
      }
    }
  }
};
</script>

<style lang="scss" scoped>
.game-button {
  cursor: pointer;
  width: 200px;
  height: 200px;
  border-radius: 0.5rem;
  border: 2px solid rgba(0, 0, 0, 0.1);

  &.highlight {
    box-shadow: inset 0 0 220px #ffffff;
    border-color: rgba(255, 255, 255, 0.5);
  }
}

#red {
  background-color: red;
}

#blue {
  background-color: blue;
}

#green {
  background-color: green;
}

#yellow {
  background-color: yellow;
}

.digital-display {
  font-family: "Orbitron";
  padding: 0.5em;
  color: red;
  background-color: black;
  font-size: 2rem;
  width: 405px;
  border-radius: 0.5rem;
}
</style>
